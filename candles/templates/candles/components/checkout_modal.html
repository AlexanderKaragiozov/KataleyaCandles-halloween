{% load static %}
<!-- Checkout Modal -->
<div id="checkout-modal" class="modal fixed inset-0 z-[70] flex items-center justify-center p-4 hidden">
    <div class="absolute inset-0 bg-black bg-opacity-70 backdrop-blur-sm"></div>
    <div
        class="modal-content relative bg-christmas-cream rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto">

        <!-- Header -->
        <div class="sticky top-0 bg-christmas-red text-white p-4 flex justify-between items-center z-10 shadow-md">
            <h2 class="font-heading text-2xl">üõí –ó–∞–≤—ä—Ä—à–≤–∞–Ω–µ –Ω–∞ –ø–æ—Ä—ä—á–∫–∞—Ç–∞</h2>
            <button id="close-checkout" class="text-white hover:text-christmas-gold transition-colors">‚úï</button>
        </div>

        <div class="p-6">
            <!-- Order Summary -->
            <div class="bg-white rounded-lg p-4 mb-6 shadow-sm border border-gray-100">
                <h3 class="font-bold text-gray-800 mb-3 border-b pb-2">–¢–≤–æ—è—Ç–∞ –ü–æ—Ä—ä—á–∫–∞</h3>
                <div id="checkout-items" class="space-y-2 text-sm text-gray-600 mb-4">
                    <!-- JS Injected -->
                </div>

                <div class="space-y-1 text-sm border-t pt-2">
                    <div class="flex justify-between">
                        <span>–ú–µ–∂–¥–∏–Ω–Ω–∞ —Å—É–º–∞:</span>
                        <span id="checkout-subtotal">0 –ª–≤.</span>
                    </div>
                    <div class="flex justify-between text-christmas-red">
                        <span>–û—Ç—Å—Ç—ä–ø–∫–∞:</span>
                        <span id="checkout-discount">-0 –ª–≤.</span>
                    </div>
                    <div class="flex justify-between text-green-600">
                        <span>–î–æ—Å—Ç–∞–≤–∫–∞:</span>
                        <span>–ë–ï–ó–ü–õ–ê–¢–ù–ê</span>
                    </div>
                    <div class="flex justify-between font-bold text-xl text-gray-800 pt-2 mt-2 border-t border-dashed">
                        <span>–û–ë–©–û –ó–ê –ü–õ–ê–©–ê–ù–ï:</span>
                        <span id="checkout-total">0 –ª–≤.</span>
                    </div>
                </div>
            </div>

            <!-- Form -->
            <form id="order-form" class="space-y-4">
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">–ò–º–µ –∏ –§–∞–º–∏–ª–∏—è *</label>
                    <input type="text" name="name" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-christmas-red focus:border-transparent outline-none"
                        placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤">
                </div>

                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">–¢–µ–ª–µ—Ñ–æ–Ω–µ–Ω –Ω–æ–º–µ—Ä *</label>
                    <input type="tel" name="phone" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-christmas-red focus:border-transparent outline-none"
                        placeholder="0888 123 456">
                </div>

                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">–ê–¥—Ä–µ—Å –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ (–ï–∫–æ–Ω—Ç/–°–ø–∏–¥–∏/–ê–¥—Ä–µ—Å)
                        *</label>
                    <textarea name="address" required rows="2"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-christmas-red focus:border-transparent outline-none"
                        placeholder="–≥—Ä. –°–æ—Ñ–∏—è, –æ—Ñ–∏—Å –ï–∫–æ–Ω—Ç –¶–µ–Ω—Ç—ä—Ä..."></textarea>
                </div>

                <div class="bg-blue-50 text-blue-800 text-xs p-3 rounded-lg flex items-start space-x-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 flex-shrink-0" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <span>–ü–ª–∞—â–∞–Ω–µ—Ç–æ —Å–µ –∏–∑–≤—ä—Ä—à–≤–∞ —Å –Ω–∞–ª–æ–∂–µ–Ω –ø–ª–∞—Ç–µ–∂ –ø—Ä–∏ –¥–æ—Å—Ç–∞–≤–∫–∞. –ò–º–∞—Ç–µ –ø—Ä–∞–≤–æ –Ω–∞ –ø—Ä–µ–≥–ª–µ–¥ –ø—Ä–µ–¥–∏
                        –ø–ª–∞—â–∞–Ω–µ.</span>
                </div>

                <button type="submit" id="submit-order-btn"
                    class="w-full bg-christmas-green hover:bg-green-800 text-white font-bold py-4 rounded-xl shadow-lg transform active:scale-95 transition-all text-lg flex justify-center items-center">
                    <span>üéÅ –ó–ê–í–™–†–®–ò –ü–û–†–™–ß–ö–ê–¢–ê</span>
                </button>
            </form>
        </div>
    </div>
</div>

<!-- Success Modal -->
<div id="success-modal" class="modal fixed inset-0 z-[80] flex items-center justify-center p-4 hidden">
    <div class="absolute inset-0 bg-black bg-opacity-80 backdrop-blur-md"></div>
    <div class="modal-content relative bg-white rounded-2xl shadow-2xl max-w-md w-full text-center p-8 overflow-hidden">

        <!-- Confetti Animation (CSS only approx) -->
        <div class="absolute inset-0 pointer-events-none opacity-20"
            style="background-image: url('data:image/svg+xml;base64,...');"></div>

        <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 text-green-600">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
        </div>

        <h2 class="font-heading text-3xl text-christmas-red mb-2">–ß–µ—Å—Ç–∏—Ç–æ!</h2>
        <p class="text-gray-600 mb-6">–ü–æ—Ä—ä—á–∫–∞—Ç–∞ –≤–∏ –µ –ø—Ä–∏–µ—Ç–∞ —É—Å–ø–µ—à–Ω–æ.</p>

        <div class="bg-gray-100 rounded-lg p-4 mb-8">
            <p class="text-xs text-gray-500 uppercase">–ü–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ ‚Ññ</p>
            <p id="success-order-id" class="text-xl font-mono font-bold text-gray-800">KAT-...</p>
        </div>

        <button onclick="window.location.reload()"
            class="w-full bg-christmas-gold text-white font-bold py-3 rounded-lg hover:bg-yellow-600 transition-colors shadow-md text-shadow">
            –û–ö, –†–ê–ó–ë–†–ê–•
        </button>
    </div>
</div>